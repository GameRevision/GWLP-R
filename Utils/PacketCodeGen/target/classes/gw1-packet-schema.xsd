<?xml version="1.0" encoding="UTF-8"?>
<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:jxb="http://java.sun.com/xml/ns/jaxb" jxb:version="2.0">


<!--RootNode: Packets-->
    <xsd:element name="Packets">
        <xsd:complexType>
            <xsd:sequence>
                <xsd:element name="Direction" type="CommunicationDirection" minOccurs="0" maxOccurs="unbounded" />
            </xsd:sequence>
        </xsd:complexType>
    </xsd:element>
        
        
<!--Type defs-->
    <!--CommunicationDirection-->
    <xsd:complexType name="CommunicationDirection">
        <xsd:sequence>
            <xsd:element name="Packet" type="PacketType" minOccurs="1" maxOccurs="unbounded" />
        </xsd:sequence>
        <xsd:attribute name="name" type="xsd:string" use="required" /><!--Ex: "GameServer to Client"-->
        <xsd:attribute name="abbr" type="xsd:string" use="required" /><!--Ex: "GStoC"-->
    </xsd:complexType>


    <!--PacketType-->
    <xsd:complexType name="PacketType">
        <xsd:sequence>
            <xsd:element name="Info" type="MetaInfo" minOccurs="0" maxOccurs="1" />
            <xsd:element name="Field" type="PacketFieldType" minOccurs="0" maxOccurs="unbounded" />
            <xsd:element name="Nested" type="PacketNestedType" minOccurs="0" maxOccurs="unbounded" />
        </xsd:sequence>
        <xsd:attribute name="header" type="xsd:integer" use="required" /><!--Ex: "123"-->
    </xsd:complexType>
    
    
    <!--MetaInfo-->
    <xsd:complexType name="MetaInfo">
        <xsd:sequence>
            <!--Used whenever a packet or type has a special name or description-->
            <xsd:element name="Name" type="xsd:string" minOccurs="0" maxOccurs="1" />
            <xsd:element name="Description" type="xsd:string" minOccurs="0" maxOccurs="1" />
            <!--Can be used to sign packets (optional ofc)-->
            <xsd:element name="Author" type="xsd:string" minOccurs="0" maxOccurs="1" />
        </xsd:sequence>
    </xsd:complexType>
    
    
    <!--ArrayInfo-->
    <xsd:complexType name="ArrayInfo">
        <xsd:attribute name="prefixType" type="PacketSimpleTypes" default="int16" /><!--Mandatory when the length is variable!-->
        <xsd:attribute name="minOccurs" type="Occurance" default="1" />
        <xsd:attribute name="maxOccurs" type="Occurance" default="1" />
    </xsd:complexType> 
    
    
    <!--Occurance-->
    <xsd:simpleType name="Occurance">
        <xsd:restriction base="xsd:string">
            <xsd:pattern value="(([0-9])+)|unbounded" />
        </xsd:restriction>
    </xsd:simpleType>
      
    
    <!--PacketFieldType-->
    <xsd:complexType name="PacketFieldType">
        <xsd:complexContent>
            <xsd:extension base="ArrayInfo">
                <xsd:sequence>
                    <!--optional-->
                    <xsd:element name="Info" type="MetaInfo" minOccurs="0" maxOccurs="1" />
                </xsd:sequence>
                <xsd:attribute name="type" type="PacketSimpleTypes" use="required" />
            </xsd:extension>
        </xsd:complexContent>
    </xsd:complexType>
    

    <!--PacketSimpleTypes-->
    <xsd:simpleType name="PacketSimpleTypes">
        <xsd:restriction base="xsd:string">
            <xsd:enumeration value="int8" /><!--8 Bit-->
            <xsd:enumeration value="int16" /><!--16 Bit-->
            <xsd:enumeration value="int32" /><!--32 Bit-->
            <!--<xsd:enumeration value="int64" /> 64 Bit-->
            <xsd:enumeration value="float" /><!--32 Bit-->
            <!--<xsd:enumeration value="ascii" /> 8 Bit-->
            <xsd:enumeration value="utf16" /><!--16 Bit-->
        </xsd:restriction>
    </xsd:simpleType>
    
    
    <!--PacketNestedType-->
    <xsd:complexType name="PacketNestedType">
        <xsd:complexContent>
            <xsd:extension base="ArrayInfo">
                <xsd:sequence>
                    <xsd:element name="Info" type="MetaInfo" minOccurs="0" maxOccurs="1" />
                    <xsd:element name="Simple" type="PacketFieldType" minOccurs="0" maxOccurs="unbounded" />
                </xsd:sequence>
            </xsd:extension>
       </xsd:complexContent>
    </xsd:complexType>

</xsd:schema>




<!--

Simple Sample:
(Every "Info" node is optional data concerning variable names or descriptions)

<Packets>
    <Direction name="GameServer to Client" abbr="GStoC">
        <Packet header="343">
            
            <Info>
                <Name>ItemGeneral</Name>
                <Description>Holds general item data. One before each item. Taken from GWLP:R at googlecode</Description>
                <Author>leet-user</Author>
            </Info>
            
            <Field type="int32">
                <Info>
                    <Name>ItemLocalID</Name>
                </Info>
            </Field>
            
            <Field type="int32">
                <Info>
                    <Name>ItemFileID</Name>
                    <Description>3D model file ID</Description>
                </Info>
            </Field>
            
            <Field type="int8">
                <Info>
                    <Name>ItemType</Name>
                    <Description>sword 1B, axe 2</Description>
                </Info>
            </Field>
            
            <Field type="int8">
                <Info>
                    <Description>sword 3, axe 6</Description>
                </Info>
            </Field>
            
            <Field type="int16">
                <Info>
                    <Name>DyeColor</Name>
                </Info>
            </Field>
            
            <Field type="...">
                ...
            </Field>
            
            <Field type="utf16" prefixType="int16" minOccurs="0" maxOccurs="64">
                <Info>
                    <Name>NameHash</Name>
                    <Description>This is a GW hstring (hex of formatted)</Description>
                </Info>
            </Field
            
            <Field type="...">
                ...
            </Field>
            
            <Nested prefixType="int16" minOccurs="0" maxOccurs="64">
                <Info>
                    <Name>ItemStats</Name>
                    <Description>This holds the stats of this item. See the wiki for documentation of stats.</Description>
                </Info>
                
                <Field type="int16">
                    <Info>
                        <Name>StatID</Name>
                    </Info>
                </Field>
                
                <Field type="int8">
                    <Info>
                        <Name>StatParam1</Name>
                    </Info>
                </Field>
                
                <Field type="int8">
                    <Info>
                        <Name>StatParam2</Name>
                    </Info>
                </Field>
            </Nested>
            
        </Packet>
    </Direction>
</Packets>


-->














